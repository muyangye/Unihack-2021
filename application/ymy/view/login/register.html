{include file='/public/header'}
<head>    
</head>
<section id="main-content">
    <section class="wrapper site-min-height">
        <div class="row">
            <div class="col-lg-12">
                <section class="panel">
                    <header class="panel-heading">注册账号</header>
                    <div class="panel-body">
                        <form class="form-horizontal login-form" role="form">
                            <div class="form-group">
                                <div class="col-lg-8 input-group">
                                    <span class="input-group-addon" style="width: 200px;">用户名</span>
                                    <input type="text" class="form-control" name="username" placeholder="请设置用户名">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-lg-8 input-group">
                                    <span class="input-group-addon" style="width: 200px;">密码</span>
                                    <input type="text" class="form-control" name="password" placeholder="请设置密码">
                                </div>
                            </div>
                            <!-- <div class="form-group">
                                <div class="col-lg-8 input-group">
                                    <span class="input-group-addon" style="width: 200px;">您经历了以下哪些事件？</span>
                                    <select name="event">
                                        <option value="新冠疫情">新冠疫情</option>
                                        <option value="暴雨灾害">暴雨灾害</option>
                                        <option value="台风灾害">台风灾害</option>
                                        <option value="性骚扰/性侵害">性骚扰/性侵害</option>
                                    </select>
                                </div>
                            </div> -->
                            <div class="form-group">
                                <div class="col-lg-8 input-group">
                                    <span class="input-group-addon" style="width: 200px;">您经历了以下哪些事件？</span>
                                    <div class="checkbox">
                                        <label>
                                            <input type="checkbox" name="covid" value="新冠疫情">新冠疫情
                                        </label>
                                        <label>
                                            <input type="checkbox" name="rainstorm" value="暴雨灾害">暴雨灾害
                                        </label>
                                        <label>
                                            <input type="checkbox" name="typhoon" value="台风灾害">台风灾害
                                        </label>
                                        <label>
                                            <input type="checkbox" name="sexual" value="性骚扰/性侵害">性骚扰/性侵害
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-lg-8 input-group">
                                    <span class="input-group-addon" style="width: 200px;">您现在有哪些mental disorders？</span>
                                    <div class="checkbox">
                                        <label>
                                            <input type="checkbox" name="PTSD" value="PTSD">PTSD
                                        </label>
                                        <label>
                                            <input type="checkbox" name="depression" value="抑郁">抑郁
                                        </label>
                                        <label>
                                            <input type="checkbox" name="anxiety" value="焦虑">焦虑
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group" style="margin-top: 40px;">
                                <div class="col-lg-offset-2 col-lg-10">
                                    <button type="button" class="btn btn-info register">注册</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </section>
            </div>
        </div>
    </section>
</section>

{include file='/public/footer'}

<script type="text/javascript" src="/static/bootbox-all-min.js"></script>
<script type="text/javascript">
    $('.btn-info').click(function(){
        var data = $('.login-form').serialize();
        console.log(data);
        $.ajax({
            url: "{:url('Login/registerDo')}",
            type: 'post',
            dataType: 'json',
            data : data,
        })
        .done(function(e)
        {
            if (e.code == 1) {
                toastr['success'](e.message, '注册成功');
            } else {
                toastr['warning'](e.message, '注册失败');
            }
        })
        .fail(function()
        {
            toastr['error']("通讯出错", '注册失败');
        });
    })
</script>